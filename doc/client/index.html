<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <title>RDK 快速开发框架</title>

    <link rel="stylesheet" type="text/css" href="/rdk/app/libs/rdk/css/loading.css">
    <script data-main="/rdk/app/libs/rdk/rdk" src="/rdk/app/libs/requirejs/require.js"></script>
    
    <script type="text/javascript">

        var menuCfg = [{
            label: "通用功能", type: 'folder', open: true,
            icon: "../img/folder.png",
            module: [{
                label: "数据源",
                doc: "client/common/datasource/DataSourceService.md",
                icon: "../img/manual.png",
            }, {
                label: "事件机制",
                doc: "client/common/event/EventService.md",
                icon: "../img/manual.png",
            }, {
                label: "国际化",
                doc: "client/common/i18n/i18n.md",
                icon: "../img/manual.png",
            }, {
                label: "对话框&模态框",
                doc: "client/common/modal/rdk_modal.md",
                icon: "../img/manual.png",
            }, {
                label: "其他",
                doc: "client/common/other.md",
                icon: "../img/manual.png",
            }],
        }, {
            label: "控件", type: 'folder', open: true,
            icon: "../img/folder.png",
            module: [{
                label: "Graph",
                doc: "client/controls/graph/graph.md",
                icon: "../img/manual.png",
            },{
                label: "Bullet",
                doc: "client/controls/bullet/bullet.md",
                icon: "../img/manual.png",
            }, {
                label: "Table",
                doc: "client/controls/table/rdk_table.md",
                icon: "../img/manual.png",
            }, {
                label: "Tree",
                doc: "client/controls/tree/tree.md",
                icon: "../img/manual.png",
            },{
                label: "Map",
                doc: "client/controls/map/map.md",
                icon: "../img/manual.png",
            },
            {
                label: "TabSelect",
                doc: "client/controls/tabselect/rdk_tabselect.md",
                icon: "../img/manual.png",
            },
            {
                label: "Time",
                doc: "client/controls/time/rdk_time.md",
                icon: "../img/manual.png",
            },
            {
                label: "BasicSelector",
                doc: "client/controls/basicselector/rdk_basic_selector.md",
                icon: "../img/manual.png",
            },   
            {
                label: "FoldSelector",
                doc: "client/controls/foldselector/rdk_fold_selector.md",
                icon: "../img/manual.png",
            },  
            {
                label: "Selector",
                doc: "client/controls/selector/rdk_selector.md",
                icon: "../img/manual.png",
            },
            {
                label: "ComboSelect",
                doc: "client/controls/comboselect/rdk_comboselect.md",
                icon: "../img/manual.png",
            },
            {
                label: "Input",
                doc: "client/controls/input/rdk_input.md",
                icon: "../img/manual.png",
            },
            {
                label: "Scroller",
                doc: "client/controls/scroller/rdk_scroller.md",
                icon: "../img/manual.png",
            },
            {
                label: "Alert",
                doc: "client/common/alert/alert.md",
                icon: "../img/manual.png",
            },{
                label: "Progressbar",
                doc: "client/controls/progressbar/progressbar.md",
                icon: "../img/manual.png",
            },{
                label: "SingleIndicator",
                doc: "client/controls/singleindicator/rdk_single_indicator.md",
                icon: "../img/manual.png",
            }],
        }, {
            label: "容器", type: 'folder', open: true,
            icon: "../img/folder.png",
            module: [
            {
                label: "Accordion",
                doc: "client/containers/accordion/rdk_accordion.md",
                icon: "../img/manual.png",
            },
            {
                label: "Panel",
                doc: "client/containers/panel/rdk_panel.md",
                icon: "../img/manual.png",
            },
            {
                label: "Tab",
                doc: "client/containers/tab/rdk_tab.md",
                icon: "../img/manual.png",
            },
			{
                label: "ButtonGroup",
                doc: "client/containers/buttongroup/rdk_buttongroup.md",
                icon: "../img/manual.png",
            }
            ],
        }, {
            label: "原生HTML标签", type: 'folder', open: false,
            icon: "../img/folder.png",
            module: [
            {
                label: "h1~h6",
                doc: "unsupported-yet.md",
                icon: "../img/manual.png",
            },
            {
                label: "span",
                doc: "unsupported-yet.md",
                icon: "../img/manual.png",
            }
            ],
        }, {
            label: "AngularJS 常用", type: 'folder', open: false,
            icon: "../img/folder.png",
            module: [
            {
                label: "频繁使用",
                open: true,
                icon: "../img/folder.png",
                module: [
                {
                    label: "angular.forEach", target: 'content',
                    url: "http://docs.ngnice.com/api/ng/function/angular.forEach",
                    icon: "../img/link.png",
                },
                {
                    label: "ngClass", target: 'content',
                    url: "http://docs.ngnice.com/api/ng/directive/ngClass",
                    icon: "../img/link.png",
                },
                {
                    label: "ngClick", target: 'content',
                    url: "http://docs.ngnice.com/api/ng/directive/ngClick",
                    icon: "../img/link.png",
                },
                {
                    label: "ngDisabled", target: 'content',
                    url: "http://docs.ngnice.com/api/ng/directive/ngDisabled",
                    icon: "../img/link.png",
                },
                {
                    label: "ngRepeat", target: 'content',
                    doc: "client/common/ng-repeat.md",
                    icon: "../img/manual.png",
                },
                {
                    label: "ngShow", target: 'content',
                    url: "http://docs.ngnice.com/api/ng/directive/ngShow",
                    icon: "../img/link.png",
                },
                {
                    label: "$timeout", target: 'content',
                    url: "http://docs.ngnice.com/api/ng/service/$timeout",
                    icon: "../img/link.png",
                },
                ]
            },
            {
                label: "常用",
                open: true,
                icon: "../img/folder.png",
                module: [
                {
                    label: "ngBlur", target: 'content',
                    url: "http://docs.ngnice.com/api/ng/directive/ngBlur",
                    icon: "../img/link.png",
                },
                {
                    label: "ngChange", target: 'content',
                    url: "http://docs.ngnice.com/api/ng/directive/ngChange",
                    icon: "../img/link.png",
                },
                {
                    label: "ngHide", target: 'content',
                    url: "http://docs.ngnice.com/api/ng/directive/ngHide",
                    icon: "../img/link.png",
                },
                {
                    label: "ngHref", target: 'content',
                    url: "http://docs.ngnice.com/api/ng/directive/ngHref",
                    icon: "../img/link.png",
                },
                {
                    label: "ngKeydown", target: 'content',
                    url: "http://docs.ngnice.com/api/ng/directive/ngKeydown",
                    icon: "../img/link.png",
                },
                {
                    label: "ngModel", target: 'content',
                    url: "http://docs.ngnice.com/api/ng/directive/ngModel",
                    icon: "../img/link.png",
                },
                {
                    label: "ngSrc", target: 'content',
                    url: "http://docs.ngnice.com/api/ng/directive/ngSrc",
                    icon: "../img/link.png",
                },
                ]
            },
            {
                label: "重要但不常用",
                open: true,
                icon: "../img/folder.png",
                module: [
                {
                    label: "ngController", target: 'content',
                    url: "http://docs.ngnice.com/api/ng/directive/ngController",
                    icon: "../img/link.png",
                },
                {
                    label: "何为作用域(Scope)", target: 'content',
                    url: "http://docs.ngnice.com/guide/scope",
                    icon: "../img/link.png",
                },
                ]
            },
            ],
        }];
        
        define('main', ['rd.controls.Tree'], function() {
            var app = angular.module("rdk_app", ['rd.controls.Tree']);
            app.controller('rdk_ctrl', ['$scope', main]);
        });
        
        function main(scope) {
            var ctxPath = getContextPath() + '#';
            scope.menuCfg = menuCfg;
            scope.location = ctxPath + 'client/common/datasource/DataSourceService.md';
            $('#content').attr('src', scope.location);
            
            scope.clickHandler = function(event, item) {
                if (item.type == 'folder') {
                    return;
                }
                if (item.doc) {
                    scope.location = ctxPath + item.doc;
                } else if (item.url) {
                    scope.location = item.url;
                } else {
                    scope.location = ctxPath + '404.md';
                }
                
                $('#content').attr('src', scope.location);
                scope.$apply();
                try {
                    $('#content')[0].contentWindow.scrollTo(0, 0);
                } catch(e) {
                }
            }
        }
        
        function getFont(treeId, node) {
            return node.font ? node.font : {};
        }
        
        //window.onload 和 document.ready 有可能不触发，不知道为啥
        var interval = setInterval(resizeContent, 5);
        
        function resizeContent() {
            if (!document.body) {
                return;
            }
            if(navigator.userAgent.indexOf('Firefox') != -1){
                document.getElementById('tree').style.height = (document.documentElement.scrollHeight - 54) + "px";
                document.getElementById('content').style.width = (document.documentElement.scrollWidth - 270) + "px";
                document.getElementById('content').style.height = (document.documentElement.scrollHeight - 22) + "px";  
            }
            else{
                document.getElementById('tree').style.height = (document.body.scrollHeight - 54) + "px";//701+40-8=733
                document.getElementById('content').style.width = (document.body.scrollWidth - 270) + "px";
                document.getElementById('content').style.height = (document.body.scrollHeight - 22) + "px";
            }
            clearInterval(interval);
        }

        window.onresize = function() {
            $('#content').css('width', $(window).width() - 270);
            $('#content').css('height', $(window).height() - 22);
        }

        function getContextPath() {
            var match = location.pathname.match(/^(.*\/doc\/)/);
            return !!match ? match[1] : location.pathname;
        }
    </script>
</head>

<style>

iframe {
    border:1px solid #CCC;
    border-radius:2px;
    margin: 0 0 0 250px;
}
#tree{
    position:fixed;
    left:0px; 
    top:0px;
    padding-top: 40px;
    overflow-y: auto;
    overflow-x: hidden;
}
.location {
    font-size: 16px;
    color: #000;
    padding: 12px 0 8px 18px;
    position: fixed;
    text-decoration: none;
}
.location:hover {
    text-decoration: underline;
}
</style>

<body ng-controller="rdk_ctrl" class="rdk_main">
    <div id="tree">
        <rdk_tree data="menuCfg" node_field="module" rdk_click="clickHandler">
        </rdk_tree>
    </div>

    <a class="location" ng-href="{{location}}" target="_blank"><img src="../img/open.png"></img> 打开当前文档</a>

    <iframe id="content" name="content"></iframe>
</body>

</html>
