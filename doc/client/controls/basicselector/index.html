<!DOCTYPE html>
<html>
<head>
<title>rdk_basic_selector</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-family: Helvetica, arial, freesans, clean, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #fff;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: #000;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}
</style>
</head>
<body>
<h1>简介</h1>
<p><code>rdk_basic_selector</code> 主要用于提供一些备选项给用户选择的场景，它支持</p>
<ul>
<li>单选</li>
<li>多选</li>
<li>至少选中若干个项目searchable</li>
<li>用户自定义选择项</li>
</ul>
<p>这是一个简单的 <code>rdk_basic_selector</code> 例子：
<live_demo example="controls/basicselector/basic" width="405"></live_demo></p>
<hr />
<h1>属性</h1>
<h2>data <binding></binding></h2>
<blockquote>
<p>支持类型：数组 或者 数据源id</p>
</blockquote>
<p><code>data</code> 是待选的全集，可以是 <code>scope</code> 的某个属性，也可以是某个<code>数据源</code>的id。</p>
<p>在实际应用时，<code>data</code> 的值很有可能是固定不变的，在这个情况下，可以直接将data的值以json字符串的形式写在html节点上：</p>
<pre><code>&lt;rdk_basic_selector
    data=&quot;[{ id: 0, label: '江苏省' },
           { id: 1, label: '浙江省' }, ...]&quot;&gt;
&lt;/rdk_basic_selector&gt;
</code></pre>

<p>这样做使得代码高度内聚，便于日后维护。但是如果 <code>data</code> 的值有很多对象，则不建议这样做。</p>
<h2>selected_items <binding></binding></h2>
<blockquote>
<p>支持类型：数组 或者 数据源id</p>
</blockquote>
<p><code>selected_items</code> 是选中的集合，可以是 <code>scope</code> 的对象，也可以是某个<code>数据源</code>的id。<code>rdk_basic_selector</code> 的任何修改都会直接反馈到对应的变量上，例如：
<live_demo example="controls/basicselector/selected_items"  width="405"></live_demo></p>
<p>注意，<code>selected_items</code> 可以参考 <code>data</code> 的做法，把值以json字符串的形式写在html中，但是这样做会导致无法使用上面例子中的双向绑定功能。</p>
<h2>track&#x5f;item&#x5f;by</h2>
<blockquote>
<p>支持类型：字符串</p>
</blockquote>
<p>这个写法</p>
<pre><code>track_item_by=&quot;id&quot; 
</code></pre>

<p>表示按id的值比较对象是否相等。<strong>必须使用具备唯一性的属性，否则会出现误判对象相等的后果</strong>。判定一个对象相等需要用到多个属性时，请使用英文逗号隔开各个属性。例如</p>
<pre><code>track_item_by=&quot;id, key&quot;
</code></pre>

<p>未提供 <code>track_item_by</code> 属性时，默认使用 <code>label_field</code> 作为 <code>track_item_by</code> 的值</p>
<h2>id</h2>
<blockquote>
<p>支持类型：字符串</p>
</blockquote>
<p>事件发出者，此字段大小写敏感。详见<code>事件机制</code>中事件发出者的说明。</p>
<h2>label_field</h2>
<blockquote>
<p>支持类型：字符串</p>
</blockquote>
<p>指明 <code>data</code> 的每个成员对象用于显示在界面上的属性名，默认值是 &quot;label&quot;。比如：</p>
<pre><code>&lt;rdk_basic_selector label_field=&quot;name&quot;
        data=&quot;[{ id: 0, name: '江苏省' },
               { id: 1, name: '浙江省' }, ...]&quot;&gt;
&lt;/rdk_basic_selector&gt;
</code></pre>

<h2>multiple_select <binding></binding></h2>
<blockquote>
<p>支持类型：字符串</p>
</blockquote>
<p>判断是否支持多选。为true则支持多选，为false则不支持。默认值为true</p>
<pre><code>&lt;rdk_basic_selector multiple_select=&quot;false&quot;&gt;&lt;/rdk_basic_selector&gt;
</code></pre>

<p><live_demo example="controls/basicselector/multiple_select" width="405"></live_demo></p>
<h2>searchable <binding></binding></h2>
<blockquote>
<p>支持类型：字符串</p>
</blockquote>
<p>判断成员对象是否搜索到，默认值为false。</p>
<pre><code>&lt;rdk_basic_selector searchable=&quot;false&quot;&gt;&lt;/rdk_basic_selector&gt;
</code></pre>

<h2>least <binding></binding></h2>
<blockquote>
<p>支持类型：数字</p>
</blockquote>
<p>选择项数量的最小值。</p>
<pre><code>&lt;rdk_basic_selector least=&quot;1&quot;&gt;&lt;/rdk_basic_selector&gt;
</code></pre>

<p><live_demo example="controls/basicselector/select_least"  width="405"></live_demo></p>
<h2>editable <binding></binding></h2>
<blockquote>
<p>支持类型：字符串</p>
</blockquote>
<p>是否支持编辑功能，默认为true,示例如下</p>
<pre><code>&lt;rdk_basic_selector editable=&quot;true&quot;&gt;&lt;/rdk_basic_selector&gt;
</code></pre>

<p><live_demo example="controls/basicselector/editable" width="405"></live_demo></p>
<h2>restrict</h2>
<blockquote>
<p>支持类型：正则表达式 或者 函数</p>
</blockquote>
<p>当<code>editable</code>设置为<code>true</code>时，控件中<code>+</code>号可见。用户可以新增数据。
<code>restrict</code>属性是可新增数据的限制条件。支持正则和函数两种限制方式。</p>
<p>1、正则表达式</p>
<p>正则表达式支持直接页面上定义</p>
<pre><code>    &lt;rdk_basic_selector data=&quot;cityData&quot; restrict=&quot;^[1-9]\d{0,2}$&quot;&gt;
</code></pre>

<p>也支持在scope上定义变量的方式，需要注意转义</p>
<pre><code>    &lt;rdk_basic_selector data=&quot;cityData&quot; restrict=&quot;{{resHandler}}&quot;&gt;&lt;/rdk_basic_selector&gt;

    scope.resHandler = '^[1-9]\\d{0,2}$';
</code></pre>

<p>支持正则表达式的例子：
<live_demo example="controls/basicselector/restrict_reg" width="405"></live_demo></p>
<p>2、自定义函数</p>
<p>支持自定义函数的例子：
<live_demo example="controls/basicselector/restrict_fun" width="405"></live_demo></p>
<h2>max_length</h2>
<blockquote>
<p>支持类型：正整数</p>
</blockquote>
<p>当<code>editable</code>设置为<code>true</code>时，控件中<code>+</code>号可见。用户可以新增数据。
<code>max_length</code>属性用于限制可输入数据的字符长度。</p>
<p><live_demo example="controls/basicselector/maxlength" width="405"></live_demo></p>
<h2>change</h2>
<blockquote>
<p>支持类型：函数</p>
</blockquote>
<p>当选择的信息发生变化时触发。通过与<code>selected_items</code>属性进行双向绑定，在界面上实时显示用户已选择的信息。比如：</p>
<pre><code> &lt;rdk_basic_selector selected_items=&quot;selectedItems&quot; data=&quot;allItems&quot; change=&quot;selectorChanged&quot;&gt;
 &lt;/rdk_basic_selector&gt;
</code></pre>

<p><live_demo example="controls/basicselector/selected_items" width="405"></live_demo></p>
<h2>error</h2>
<blockquote>
<p>支持类型：函数</p>
</blockquote>
<p>通过回调方式控件会返回相关异常信息，可以通过控件反馈的具体的错误码来自定义错误信息。控件默认的错误码及异常信息对照请参见<a href="/doc/controls/common/error_list.html"><code>异常列表</code></a>。代码如下：</p>
<pre><code> &lt;rdk_basic_selector error=&quot;raiseErrorAct&quot;&gt;&lt;/rdk_basic_selector&gt;
</code></pre>

<p><live_demo example="controls/basicselector/select_error" width="405"></live_demo></p>
<p><strong>注意：异常列表中的错误码对整个RDK控件来说是全局唯一的</strong></p>
<h2>child_change</h2>
<p>此属性为通用属性，请参见<a href="/doc/controls/common/child_change.html"><code>childChange</code></a>中的说明</p>
<h1>事件</h1>
<p>事件是RDK实现交互的主要手段之一，强大但易用。<a href="/doc/common/event">了解更多</a>。</p>
<h2>SELECT</h2>
<blockquote>
<p>事件类型：EventTypes.SELECT</p>
</blockquote>
<p>当在界面上进行点选操作时广播此事件。关于广播事件请参见<code>事件机制</code>中的<code>派发</code>部分</p>
<h2>CHANGE</h2>
<blockquote>
<p>事件类型：EventTypes.CHANGE</p>
</blockquote>
<p>通过监听此事件，可以捕获<code>selector</code>控件内部修改后的最新的数据信息。关于监听事件请参见<code>事件机制</code>中的<code>监听</code>部分</p>
<h2>CREATE</h2>
<blockquote>
<p>事件类型：EventTypes.CREATE</p>
</blockquote>
<p>用户单击<code>+</code>号按钮，按钮变成输入框状态后，用户可以自定义新增项目。项目新增成功与否会抛<code>CREATE</code>事件。<code>CREATE</code>事件的意义在于，应用可以在捕捉<code>CREATE</code>事件后，做自己的特殊处理，譬如弹出提示框等。</p>
<p><code>restrict</code>可以校验用户新增内容，故常配合<code>restrict</code>使用。如果用户设置了<code>id</code>，根据校验是否通过，就会发送<code>CREATE</code>事件。</p>
<ul>
<li>用户校验成功，回车后发送 <code>CREATE</code> 的 <code>true</code>。</li>
<li>用户校验失败，发送 <code>CREATE</code> 的 <code>false</code>。</li>
</ul>
<p><code>CREATE</code>事件详细示例：
<live_demo example="controls/basicselector/create_event" width="405"></live_demo></p>
<h2>事件的综合实例</h2>
<p><live_demo example="controls/basicselector/select_event" width="405"></live_demo></p>
<h1>方法</h1>
<h2>selected2string</h2>
<p>Selector控件提供一个将所有选择项转化为相互连接的字符串函数。
函数原型：</p>
<pre><code>selected2string = function(selected, labelField, separator)
{
    ... 代码实现
}
</code></pre>

<p>它接收三个参数：</p>
<p><code>selected</code>选择项列表</p>
<p><code>labelField</code>选择项标签</p>
<p><code>separator</code>选择项字符串连接的分隔符</p>
<p>代码示例：</p>
<pre><code>scope.selected2string = function(selected, context, index)
{
    return Selector.selected2string(selected, 'label', ';');
}
</code></pre>

<p><strong>注意：使用此方法需要依赖注入Selector，即使是rdk-selector控件本身也需要注入此依赖！</strong></p>
<h1>样式</h1>
<h3><a href="/demo/controls/basicselector/select_style">关键样式示例</a></h3>
<h3>border</h3>
<p>边框样式，默认值：1px solid #a5a6aa</p>
<h3>border-radius</h3>
<p>向元素添加圆角边框样式，默认值：4px</p>
<h3>background-color</h3>
<p>背景色，默认值：#FFFFFF</p>
<h3>position</h3>
<p>定位 默认值：absolute</p>
<h3>max-height</h3>
<p>控件最大高度，默认值：800px</p>
<h3>width</h3>
<p>控件宽度，默认值400px</p>
<h3>padding</h3>
<p>属性定义元素边框与元素内容之间的空间（单位：像素）。默认值：10px（即属性元素与上边框的间隔为10px）,padding属性的默认填充顺序为从上开始的顺时针方向。</p>
<h3>original-item</h3>
<h4>list-style</h4>
<p>设置所有的列表属性,默认值: none</p>
<h4>float</h4>
<p>元素的水平方向浮动，意味着元素只能左右移动而不能上下移动。默认值： left</p>
<h4>margin</h4>
<p>定义元素周围的空间即外边距。默认属性:0px 10px 7px 0</p>
<h4>border</h4>
<p>参见上文中的相关属性解释，默认值: 2px solid #A5A6AA</p>
<h4>padding</h4>
<p>参见上文中的相关属性解释，默认值: 3px</p>
<h4>border-radius</h4>
<p>参见上文中的相关属性解释，默认值: 4px</p>
<h4>cursor</h4>
<p>使用的光标样式，默认值: pointer</p>
<h3>selected-item</h3>
<p>属性值同original-item，只border属性的默认值变为2px solid #00AAFF</p>
<h3>selector-editor</h3>
<p>属性值同original-item</p>
<h4>width</h4>
<p>参见上文中的相关属性解释，默认值: 100px</p>
<h4>border-radius</h4>
<p>参见上文中的相关属性解释，默认值: 4px</p>
<h2>渲染器</h2>
<p>渲染器可以理解为数据的表现方式，具体地说，是指显示每一条数据时采用的形式。我们只需要把数据按照一定的格式组织好，然后赋予给组件即可。 </p>
<p>自定义渲染器采用嵌入式，即直接写在组件的标签中来实现自定义数据展现的形式。</p>
<p><strong>注意由于渲染器的scope是独立的，所以需要使用appScope的方式来获取距离当前渲染器最近的控制器的作用域。</strong></p>
<h3><a href="/doc/controls/basicselector/render_demo.html">渲染器示例</a></h3>
<h2>数据源绑定</h2>
<p>可以通过URI或URL来绑定数据源。
数据源的绑定分为三个部分：</p>
<ul>
<li>创建数据源，<strong>此部分关键为设置绑定的数据源ID，此ID为唯一的</strong></li>
<li>发送事件，发送事件可以使用broadcast方式；也可以使用已经封装好的函数(如query)(推荐)</li>
<li>监听事件并获取事件返回的结果</li>
</ul>
<p><strong>注意 当使用JSON格式的数据源时，JSON的格式必须正确，否则无法正确返回数据源的内容.</strong></p>
<div>
<script data-main="/rdk/app/libs/rdk/rdk" src="/rdk/app/libs/requirejs/require.js"></script>
<script src="/doc/tools/doc_js/main.js"></script>
<script src="/doc/tools/doc_js/misc.js"></script>
</div>
</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
